<% provide(:title, "#{@event.title} Dashboard") %>
<div class="row">
  <div class="span6">
    <div class="page-header">
      <h2>
        <%= truncate(@event.title, :length => 20, :separator => ' ') %> Dashboard
        <% if @event.public? %>
          <i class="icon-globe" rel="tooltip" title="Public event" data-placement="right"></i>
        <% else %>
          <i class="icon-lock" rel="tooltip" title="Private event" data-placement="right"></i>
        <% end %>
      </h2>
    </div>
  </div>
  <div class="span3">
    <%= link_to "View event", event_path(@event), class: "btn btn-primary btn-block push-top-title" %>
  </div>
  <div class="span3">
    <%= link_to "Edit event", edit_event_path(@event), class: "btn btn-primary btn-block push-top-title" %>
  </div>
</div>
<div class="row">
  <div class="span8">
    <h3>Quick Statistics</h3>
    <div class="well" id="quick-statistics">
      <% if @event.paid_percentage > 0 %>
        <div class="progress">
          <div class="bar" style="width: <%= @event.paid_percentage %>%;"><%= number_with_precision @event.paid_percentage, precision: 2 %>%</div>
        </div>
      <% end %>
      <div class="quarter"><strong>Collected:</strong></div>
      <div class="three-quarters" id="money-collected"><%= humanized_money_with_symbol @event.money_collected %></div>
      <div class="clearfix"></div>
      <div class="quarter"><strong>Goal:</strong></div>
      <div class="three-quarters"><%= humanized_money_with_symbol @event.total_amount %></div>
      <div class="clearfix"></div>
    </div>
  </div>
  <div class="span4">
    <h3>Event Actions</h3>
    <div class="well">
      <%= link_to "Send Email Reminder", new_event_reminder_path(@event), class: "btn btn-primary btn-block" %>
      <%= link_to "Create Guest Check-in PDF", '#', class: "btn btn-primary btn-block" %>
      <%= link_to "Delete Event", @event, class: "btn btn-block btn-danger", data: { confirm: "This is irreversible, are you sure you want to delete this event?" }, method: :delete %>
    </div>
  </div>
</div>
<div class="row">
  <div class="span12">
    <h3>Event Members</h3>
    <table class="table table-striped table-bordered">
      <tr>
        <th style="width:25%">Name</th>
        <th style="width:25%">Paid</th>
        <th style="width:25%">Visited Event?</th>
        <th style="width:25%">Actions</th>
      </tr>
      <%= render collection: @event.paying_members, partial: "users/event_user", as: :user %>
    </table>
  </div>
</div>