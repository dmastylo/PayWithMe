<%
  # NOTE: This partial takes in an EventUser with name event_user (though a GroupUser with name event_user works as well) rather than a user.
%>
<% user = event_user.user %>
<li class="member" id="member-<%= user.id %>">
  <div class="profile-image" id="image-user-<%= user.id %>" data-placement="right">
      <%= profile_image_tag user, :thumb %> 
  </div>
  <div class="user">
    <%= link_to user_name(user), user %>
    <% if user.online? %>
      <div class="user-online" rel="tooltip" title="This user is online" data-placement="top"></div>
    <% end %>
  </div>
  <div class="status">
    <% if @event.present? %>
      <% if user == @event.organizer %>
        Event Organizer
      <% elsif event_user.paid? %>
        Paid
      <% else %>
        Unpaid
      <% end %>
    <% elsif @group.present? %>
      <% if @group.is_admin?(user) %>
        Group Organizer
      <% else %>
        Member
      <% end %>
    <% end %>
  </div>
  <% if signed_in? && @event.present? && @event.can_nudge?(current_user, user) %>
    <div class="nudge">
      <span id="link-user-<%= user.id %>"><%= link_to "Nudge!", nudge_event_event_user_path(@event, @event.event_user(user)), class: "btn btn-primary", method: :put, remote: true %></span>
    </div>
  <% end %>
  <div class="clearfix"></div>
</li>