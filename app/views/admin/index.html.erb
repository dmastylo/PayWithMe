<% provide(:title, "Administrator Panel") %>
<% content_for(:wrapper_top) do %>
  <div class="container">
    <div class="page-header">
      <h2>Administrator Panel</h2>
    </div>
  </div>
<% end %>

<div class="container">
  <div class="row">
    <div class="span8">
      <h3 class="pull-left">Recent Users</h3>
      <%= link_to "View All Users", users_admin_index_path, class: "btn btn-primary pull-right push-top-small" %>
      <table class="table table-bordered table-striped">
        <tr>
          <th>Name</th>
          <th><a rel="tooltip" title="Online Users">On</a></th>
          <th>Email</th>
          <th>Registered</th>
        </tr>
        <%= render collection: @recent_users, partial: "users/admin_user", as: :user, locals: { full: false } %>
      </table>
      <div class="clearfix"></div>

      <h3 class="pull-left">Recent Events</h3>
      <%= link_to "View All Events", events_admin_index_path, class: "btn btn-primary pull-right push-top-small" %>
      <table class="table table-bordered table-striped">
        <tr>
          <th>Title</th>
          <th>Organizer</th>
          <th>Members</th>
          <th>Created</th>
        </tr>
        <%= render collection: @recent_events, partial: "events/admin_event", as: :event, locals: { full: false } %>
      </table>
      <div class="clearfix"></div>

      <h3 class="pull-left">Recent Groups</h3>
      <%= link_to "View All Groups", groups_admin_index_path, class: "btn btn-primary pull-right push-top-small" %>
      <table class="table table-bordered table-striped">
        <tr>
          <th>Title</th>
          <th>Organizer</th>
          <th>Members</th>
          <th>Created</th>
        </tr>
        <%= render collection: @recent_groups, partial: "groups/admin_group", as: :group %>
      </table>
      <div class="clearfix"></div>

      <h3 class="pull-left">Recent Organization Contacts</h3>
      <%= link_to "View All Organization Contacts", organizations_admin_index_path, class: "btn btn-primary pull-right push-top-small" %>
      <table class="table table-bordered table-striped">
        <tr>
          <th>Name</th>
          <th>Contact</th>
          <th>Split?</th>
          <th>Deals?</th>
          <th>Email</th>
        </tr>
        <%= render collection: @recent_organizations, partial: "organizations/admin_organization", as: :organization, locals: { full: false } %>
      </table>
      <div class="clearfix"></div>

      <h3 class="pull-left">Recent Payments</h3>
      <%= link_to "View All Payments", payments_admin_index_path, class: "btn btn-primary pull-right push-top-small" %>
      <table class="table table-bordered table-striped">
        <tr>
          <th>Event</th>
          <th>From</th>
          <th>To</th>
          <th>Amount</th>
          <th>Method</th>
        </tr>
        <%= render collection: @recent_payments, partial: "payments/admin_payment", as: :payment %>
      </table>

      <h3 class="pull-left">Recent Nudges</h3>
      <%= link_to "View All Nudges", nudges_admin_index_path, class: "btn btn-primary pull-right push-top-small" %>
      <table class="table table-bordered table-striped">
        <tr>
          <th>Event</th>
          <th>Nudger</th>
          <th>Nudgee</th>
          <th>Rating</th>
          <th>Created</th>
          <th><a rel="tooltip" title="Did the nudgee pay?">Effect?</a></th>
        </tr>
        <%= render collection: @recent_nudges, partial: "nudges/admin_nudge", as: :nudge %>
      </table>

      <h3 class="pull-left">Recent Affiliates</h3>
      <%= link_to "View All Affiliates", affiliates_admin_index_path, class: "btn btn-primary pull-right push-top-small" %>
      <%= link_to "Add New Affiliate", new_affiliate_path, class: "btn btn-primary pull-right push-top-small" %>
      <table class="table table-bordered table-striped">
        <tr>
          <th><a rel="tooltip" title="Click name to view details">Name</a></th>
          <th>Affiliate Type</th>
          <th>School (if campus rep)</th>
          <th>Referrals</th>
          <th><a rel="tooltip" title="Only electronic payments">Referred Payments</a></th>
          <th><a rel="tooltip" title="Only electronic payments">Value Payments</a></th>
          <th>Created</th>
          <th>Delete</th>
        </tr>
        <%= render collection: @recent_affiliates, partial: "affiliates/admin_affiliate", as: :affiliate %>
      </table>
    </div>
    <div class="span4">
      <div class="well">
        <h3>Quick Statistics</h3>
        <div class="large-statistic">
          <span class="count"><%= @users_count %></span> users
        </div>
        <div class="large-statistic">
          <span class="count"><%= @events_count %></span> events / <span class="count"><%= @active_events_count %></span> currently active
        </div>
        <div class="large-statistic">
          <span class="count"><%= @groups_count %></span> groups
        </div>
        <div class="large-statistic">
          <span class="count"><%= @organizations_count %></span> restaurant contacts
        </div>
        <div class="large-statistic">
          <span class="count"><%= @payments_count %></span> payments / <span class="count"><%= @electronic_payments_count %></span> electronic / <span class="count"><%= @cash_payments_count %></span> cash
        </div>
        <div class="large-statistic">
          <span class="count"><%= @nudges_count %></span> nudges / <span class="count"><%= @nudges_rated_G_count %></span> G / <span class="count"><%= @nudges_rated_PG13_count %></span> PG13 / <span class="count"><%= @nudges_rated_R_count %></span> R
        </div>
        <div class="large-statistic">
          <span class="count"><%= @affiliates_count %></span> affiliates
        </div>
      </div>
    </div>
  </div>
</div>